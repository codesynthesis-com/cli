# file      : buildfile
# copyright : Copyright (c) 2009-2017 Code Synthesis Tools CC
# license   : MIT; see accompanying LICENSE file

import libs = libcutl%lib{cutl}

exe{cli}:                                     \
          {            cxx}{ cli            } \
          {hxx         cxx}{ context        } \
          {hxx         cxx}{ generator      } \
          {hxx         cxx}{ header         } \
          {hxx         cxx}{ html           } \
          {hxx         cxx}{ inline         } \
          {hxx ixx     cxx}{ lexer          } \
          {hxx         cxx}{ man            } \
          {hxx         cxx}{ name-processor } \
          {hxx ixx     cxx}{ options        } \
          {hxx         cxx}{ option-types   } \
          {hxx         cxx}{ parser         } \
          {hxx         cxx}{ runtime-header } \
          {hxx         cxx}{ runtime-inline } \
          {hxx         cxx}{ runtime-source } \
          {hxx            }{ semantics      } \
          {hxx         cxx}{ source         } \
          {hxx ixx        }{ token          } \
          {hxx            }{ traversal      } \
          {hxx         cxx}{ txt            } \
semantics/{hxx         cxx}{ class          } \
semantics/{hxx         cxx}{ doc            } \
semantics/{hxx         cxx}{ elements       } \
semantics/{hxx         cxx}{ expression     } \
semantics/{hxx         cxx}{ namespace      } \
semantics/{hxx         cxx}{ option         } \
semantics/{hxx     txx cxx}{ unit           } \
traversal/{hxx         cxx}{ class          } \
traversal/{hxx            }{ doc            } \
traversal/{hxx         cxx}{ elements       } \
traversal/{hxx            }{ expression     } \
traversal/{hxx         cxx}{ namespace      } \
traversal/{hxx         cxx}{ option         } \
traversal/{hxx         cxx}{ unit           } \
                             $libs

# Generated options parser.
#
if $cli.configured
{
  cli.cxx{options}: cli{options}

  cli.options += -I $src_root --include-with-brackets --include-prefix cli \
--guard-prefix CLI --generate-file-scanner --generate-specifier \
--reserved-name stdout

  # Include generated cli files into the distribution.
  #
  cli.cxx{*}: dist = true
}
